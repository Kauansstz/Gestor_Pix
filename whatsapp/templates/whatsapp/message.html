{% extends "base.html" %}

{% block content %}
<form method="POST" enctype="multipart/form-data" class="grid grid-cols-1 gap-3 bg-white p-8 rounded-lg shadow-lg w-full max-w-3xl mx-auto mt-20">
    {% csrf_token %}
    
    {{ form.nome_cliente.label_tag }}
    {{ form.nome_cliente }}

    {{ form.numero_cliente.label_tag }}
    {{ form.numero_cliente }}

    {{ form.tipo_midia.label_tag }}
    {{ form.tipo_midia }}

    <!-- Campos dinÃ¢micos -->
    <div id="texto_field" class="mb-6 hidden">
        {{ form.msg_text.label_tag }}
        {{ form.msg_text }}
    </div>

    <div id="imagem_field" class="mb-6 hidden">
        {{ form.cover.label_tag }}
        {{ form.cover }}
        {{ form.link_pix.label_tag }}
        {{ form.link_pix }}
    </div>

    <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-6 w-28 rounded-md">
        Enviar
    </button>
</form>

<script>
const tipoMidia = document.getElementById('tipo_midia');
const textoField = document.getElementById('texto_field');
const imagemField = document.getElementById('imagem_field');

tipoMidia.addEventListener('change', function() {
    if (this.value === 'TEXT') {
        textoField.classList.remove('hidden');
        imagemField.classList.add('hidden');
    } else if (this.value === 'IMAGEM') {
        
        imagemField.classList.remove('hidden');
    } else {
        textoField.classList.add('hidden');
        imagemField.classList.add('hidden');
    }
});
</script>
{% endblock content %}

{% comment %} Quando API estiver disponivel!!!!!!! {% endcomment %}
{% comment %} 
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Chat WhatsApp</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
    <script src="{% static 'js/chat.js' %}" defer></script>
</head>
<body class="bg-gray-100">
<div class="flex h-screen">

    <!-- Lista de conversas -->
    <div class="w-1/3 bg-white border-r overflow-y-auto" id="lista-conversas"></div>

    <!-- Chat -->
    <div class="flex-1 flex flex-col">
        <div id="chat-header" class="bg-gray-200 p-4 font-semibold">Selecione uma conversa</div>
        <div id="chat-mensagens" class="flex-1 p-4 overflow-y-auto bg-gray-50"></div>
        <form id="form-enviar" class="p-4 bg-white border-t flex">
            {% csrf_token %}
            <input id="mensagem" name="mensagem" class="flex-1 border rounded-md px-3 py-2 mr-2" placeholder="Digite...">
            <button class="bg-blue-500 text-white px-4 py-2 rounded-md">Enviar</button>
        </form>
    </div>

</div>
</body>
</html> {% endcomment %}
